# Template file for 'portaudio'
pkgname=portaudio
version=190700.20210406
revision=1
build_style=gnu-configure
configure_args="--enable-cxx --with-jack $(vopt_enable sndio)"
hostmakedepends="pkg-config"
makedepends="alsa-lib-devel jack-devel $(vopt_if sndio sndio-devel)"
short_desc="Portable cross-platform audio I/O library"
maintainer="Ã‰rico Nogueira <ericonr@disroot.org>"
license="MIT"
homepage="https://www.portaudio.com"
distfiles="https://files.${pkgname}.com/archives/pa_stable_v${version%.*}_${version#*.}.tgz"
checksum=47efbf42c77c19a05d22e627d42873e991ec0c1357219c0d74ce6a2948cb2def
disable_parallel_build=yes

build_options="sndio"

post_install() {
	vlicense LICENSE.txt
}

portaudio-devel_package() {
	depends="${makedepends} portaudio>=${version}_${revision}"
	short_desc+=" - development files"
	pkg_install() {
		vmove "usr/include/*.h"
		vmove usr/lib/libportaudio.a
		vmove usr/lib/libportaudio.so
		vmove usr/lib/pkgconfig/portaudio-2.0.pc
	}
}

portaudio-cpp_package() {
	short_desc+=" - C++ Bindings"
	pkg_install() {
		vmove "usr/lib/libportaudiocpp.so.*"
	}
}

portaudio-cpp-devel_package() {
	depends="portaudio-cpp>=${version}_${revision} portaudio-devel>=${version}_${revision}"
	short_desc+=" - C++ bindings development files"
	pkg_install() {
		vmove usr/include/portaudiocpp
		vmove usr/lib/pkgconfig/portaudiocpp.pc
		vmove usr/lib/libportaudiocpp.a
		vmove usr/lib/libportaudiocpp.so
	}
}
